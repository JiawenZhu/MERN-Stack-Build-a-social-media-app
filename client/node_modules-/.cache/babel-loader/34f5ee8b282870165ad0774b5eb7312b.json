{"ast":null,"code":"var _jsxFileName = \"/Users/jiawenzhu/developer/MERN-Stack-Build-a-social-media-app/client/src/components/StatusModal.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { GLOBALTYPES } from '../redux/actions/globalTypes';\nimport { createPost, updatePost } from '../redux/actions/postAction';\nimport Icons from './Icons';\nimport { imageShow, videoShow } from '../utils/mediaShow';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst StatusModal = () => {\n  _s();\n\n  const {\n    auth,\n    theme,\n    status,\n    socket\n  } = useSelector(state => state);\n  const dispatch = useDispatch();\n  const [content, setContent] = useState('');\n  const [images, setImages] = useState([]);\n  const [stream, setStream] = useState(false);\n  const videoRef = useRef();\n  const refCanvas = useRef();\n  const [tracks, setTracks] = useState('');\n\n  const handleChangeImages = e => {\n    const files = [...e.target.files];\n    let err = \"\";\n    let newImages = [];\n    console.log(e.target.files);\n    files.forEach(file => {\n      if (!file) return err = \"File does not exist.\";\n\n      if (file.size > 1024 * 1024 * 5) {\n        return err = \"The image/video largest is 5mb.\";\n      }\n\n      return newImages.push(file);\n    });\n    if (err) dispatch({\n      type: GLOBALTYPES.ALERT,\n      payload: {\n        error: err\n      }\n    });\n    setImages([...images, ...newImages]);\n  };\n\n  const deleteImages = index => {\n    const newArr = [...images];\n    newArr.splice(index, 1);\n    setImages(newArr);\n  };\n\n  const handleStream = () => {\n    setStream(true);\n\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      navigator.mediaDevices.getUserMedia({\n        video: true\n      }).then(mediaStream => {\n        videoRef.current.srcObject = mediaStream;\n        videoRef.current.play();\n        const track = mediaStream.getTracks();\n        setTracks(track[0]);\n      }).catch(err => console.log(err));\n    }\n  };\n\n  const handleCapture = () => {\n    const width = videoRef.current.clientWidth;\n    const height = videoRef.current.clientHeight;\n    refCanvas.current.setAttribute(\"width\", width);\n    refCanvas.current.setAttribute(\"height\", height);\n    const ctx = refCanvas.current.getContext('2d');\n    ctx.drawImage(videoRef.current, 0, 0, width, height);\n    let URL = refCanvas.current.toDataURL();\n    setImages([...images, {\n      camera: URL\n    }]);\n  };\n\n  const handleStopStream = () => {\n    tracks.stop();\n    setStream(false);\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (images.length === 0) return dispatch({\n      type: GLOBALTYPES.ALERT,\n      payload: {\n        error: \"Please add your photo.\"\n      }\n    });\n\n    if (status.onEdit) {\n      dispatch(updatePost({\n        content,\n        images,\n        auth,\n        status\n      }));\n    } else {\n      dispatch(createPost({\n        content,\n        images,\n        auth,\n        socket\n      }));\n    }\n\n    setContent('');\n    setImages([]);\n    if (tracks) tracks.stop();\n    dispatch({\n      type: GLOBALTYPES.STATUS,\n      payload: false\n    });\n  };\n\n  useEffect(() => {\n    if (status.onEdit) {\n      setContent(status.content);\n      setImages(status.images);\n    }\n  }, [status]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"status_modal\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"status_header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"m-0\",\n          children: \"Create Post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          onClick: () => dispatch({\n            type: GLOBALTYPES.STATUS,\n            payload: false\n          }),\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"status_body\",\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          name: \"content\",\n          value: content,\n          placeholder: `${auth.user.username}, what are you thinking?`,\n          onChange: e => setContent(e.target.value),\n          style: {\n            filter: theme ? 'invert(1)' : 'invert(0)',\n            color: theme ? 'white' : '#111',\n            background: theme ? 'rgba(0,0,0,.03)' : ''\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-fill\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Icons, {\n            setContent: setContent,\n            content: content,\n            theme: theme\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"show_images\",\n          children: images.map((img, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"file_img\",\n            children: [img.camera ? imageShow(img.camera, theme) : img.url ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: img.url.match(/video/i) ? videoShow(img.url, theme) : imageShow(img.url, theme)\n            }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: img.type.match(/video/i) ? videoShow(URL.createObjectURL(img), theme) : imageShow(URL.createObjectURL(img), theme)\n            }, void 0, false), /*#__PURE__*/_jsxDEV(\"span\", {\n              onClick: () => deleteImages(index),\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 37\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 21\n        }, this), stream && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stream position-relative\",\n          children: [/*#__PURE__*/_jsxDEV(\"video\", {\n            autoPlay: true,\n            muted: true,\n            ref: videoRef,\n            width: \"100%\",\n            height: \"100%\",\n            style: {\n              filter: theme ? 'invert(1)' : 'invert(0)'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            onClick: handleStopStream,\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n            ref: refCanvas,\n            style: {\n              display: 'none'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input_images\",\n          children: stream ? /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-camera\",\n            onClick: handleCapture\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 31\n          }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-camera\",\n              onClick: handleStream\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"file_upload\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                name: \"file\",\n                id: \"file\",\n                multiple: true,\n                accept: \"image/*,video/*\",\n                onChange: handleChangeImages\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"status_footer\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-secondary w-100\",\n          type: \"submit\",\n          children: \"Post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 9\n  }, this);\n};\n\n_s(StatusModal, \"sMpoTEN6w1MuucuMvOlfqtv6r8E=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c = StatusModal;\nexport default StatusModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"StatusModal\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useSelector","useDispatch","GLOBALTYPES","createPost","updatePost","Icons","imageShow","videoShow","StatusModal","auth","theme","status","socket","state","dispatch","content","setContent","images","setImages","stream","setStream","videoRef","refCanvas","tracks","setTracks","handleChangeImages","e","files","target","err","newImages","console","log","forEach","file","size","push","type","ALERT","payload","error","deleteImages","index","newArr","splice","handleStream","navigator","mediaDevices","getUserMedia","video","then","mediaStream","current","srcObject","play","track","getTracks","catch","handleCapture","width","clientWidth","height","clientHeight","setAttribute","ctx","getContext","drawImage","URL","toDataURL","camera","handleStopStream","stop","handleSubmit","preventDefault","length","onEdit","STATUS","user","username","value","filter","color","background","map","img","url","match","createObjectURL","display"],"sources":["/Users/jiawenzhu/developer/MERN-Stack-Build-a-social-media-app/client/src/components/StatusModal.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { GLOBALTYPES } from '../redux/actions/globalTypes'\nimport { createPost, updatePost } from '../redux/actions/postAction'\nimport Icons from './Icons'\nimport { imageShow, videoShow } from '../utils/mediaShow'\n\nconst StatusModal = () => {\n    const { auth, theme, status, socket } = useSelector(state => state)\n    const dispatch = useDispatch()\n\n    const [content, setContent] = useState('')\n    const [images, setImages] = useState([])\n\n    const [stream, setStream] = useState(false)\n    const videoRef = useRef()\n    const refCanvas = useRef()\n    const [tracks, setTracks] = useState('')\n\n    const handleChangeImages = e => {\n        const files = [...e.target.files]\n        let err = \"\"\n        let newImages = []\n        console.log(e.target.files);\n        files.forEach(file => {\n            if(!file) return err = \"File does not exist.\"\n\n            if(file.size > 1024 * 1024 * 5){\n                return err = \"The image/video largest is 5mb.\"\n            }\n\n            return newImages.push(file)\n        })\n\n        if(err) dispatch({ type: GLOBALTYPES.ALERT, payload: {error: err} })\n        setImages([...images, ...newImages])\n    }\n\n    const deleteImages = (index) => {\n        const newArr = [...images]\n        newArr.splice(index, 1)\n        setImages(newArr)\n    }\n\n    const handleStream = () => {\n        setStream(true)\n        if(navigator.mediaDevices && navigator.mediaDevices.getUserMedia){\n            navigator.mediaDevices.getUserMedia({video: true})\n            .then(mediaStream => {\n                videoRef.current.srcObject = mediaStream\n                videoRef.current.play()\n\n                const track = mediaStream.getTracks()\n                setTracks(track[0])\n            }).catch(err => console.log(err))\n        }\n    }\n\n    const handleCapture = () => {\n        const width = videoRef.current.clientWidth;\n        const height = videoRef.current.clientHeight;\n\n        refCanvas.current.setAttribute(\"width\", width)\n        refCanvas.current.setAttribute(\"height\", height)\n\n        const ctx = refCanvas.current.getContext('2d')\n        ctx.drawImage(videoRef.current, 0, 0, width, height)\n        let URL = refCanvas.current.toDataURL()\n        setImages([...images, {camera: URL}])\n    }\n\n    const handleStopStream = () => {\n        tracks.stop()\n        setStream(false)\n    }\n\n    const handleSubmit = (e) => {\n        e.preventDefault()\n        if(images.length === 0)\n        return dispatch({ \n            type: GLOBALTYPES.ALERT, payload: {error: \"Please add your photo.\"}\n        })\n\n        if(status.onEdit){\n            dispatch(updatePost({content, images, auth, status}))\n        }else{\n            dispatch(createPost({content, images, auth, socket}))\n        }\n        \n\n        setContent('')\n        setImages([])\n        if(tracks) tracks.stop()\n        dispatch({ type: GLOBALTYPES.STATUS, payload: false})\n    }\n\n    useEffect(() => {\n        if(status.onEdit){\n            setContent(status.content)\n            setImages(status.images)\n        }\n    },[status])\n\n\n   \n\n    return (\n        <div className=\"status_modal\">\n            <form onSubmit={handleSubmit}>\n                <div className=\"status_header\">\n                    <h5 className=\"m-0\">Create Post</h5>\n                    <span onClick={() => dispatch({\n                        type: GLOBALTYPES.STATUS, payload: false\n                    })}>\n                        &times;\n                    </span>\n                </div>\n\n                <div className=\"status_body\">\n                    <textarea name=\"content\" value={content}\n                    placeholder={`${auth.user.username}, what are you thinking?`}\n                    onChange={e => setContent(e.target.value)}\n                    style={{\n                        filter: theme ? 'invert(1)' : 'invert(0)',\n                        color: theme ? 'white' : '#111',\n                        background: theme ? 'rgba(0,0,0,.03)' : '',\n                    }} />\n\n                    <div className=\"d-flex\">\n                        <div className=\"flex-fill\"></div>\n                        <Icons setContent={setContent} content={content} theme={theme} />\n                    </div>\n\n                    <div className=\"show_images\">\n                        {\n                            images.map((img, index) => (\n                                <div key={index} id=\"file_img\">\n                                    {\n                                        img.camera ? imageShow(img.camera, theme)\n                                        : img.url\n                                            ?<>\n                                                {\n                                                    img.url.match(/video/i)\n                                                    ? videoShow(img.url, theme) \n                                                    : imageShow(img.url, theme)\n                                                }\n                                            </>\n                                            :<>\n                                                {\n                                                    img.type.match(/video/i)\n                                                    ? videoShow(URL.createObjectURL(img), theme) \n                                                    : imageShow(URL.createObjectURL(img), theme)\n                                                }\n                                            </>\n                                    }\n                                    <span onClick={() => deleteImages(index)}>&times;</span>\n                                </div>\n                            ))\n                        }\n                    </div>\n\n                    {\n                        stream && \n                        <div className=\"stream position-relative\">\n                            <video autoPlay muted ref={videoRef} width=\"100%\" height=\"100%\"\n                            style={{filter: theme ? 'invert(1)' : 'invert(0)'}} />\n                            \n                            <span onClick={handleStopStream}>&times;</span>\n                            <canvas ref={refCanvas} style={{display: 'none'}} />\n                        </div>\n                    }\n\n                    <div className=\"input_images\">\n                        {\n                            stream \n                            ? <i className=\"fas fa-camera\" onClick={handleCapture} />\n                            : <>\n                                <i className=\"fas fa-camera\" onClick={handleStream} />\n\n                                <div className=\"file_upload\">\n                                    <i className=\"fas fa-image\" />\n                                    <input type=\"file\" name=\"file\" id=\"file\"\n                                    multiple accept=\"image/*,video/*\" onChange={handleChangeImages} />\n                                </div>\n                            </>\n                        }\n                        \n                    </div>\n\n                </div>\n\n                <div className=\"status_footer\">\n                    <button className=\"btn btn-secondary w-100\" type=\"submit\">\n                        Post\n                    </button>\n                </div>\n\n            </form>\n        </div>\n    )\n}\n\nexport default StatusModal\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}